user www-data;

events {}

http {
	server_tokens off;  # don't show nginx version in error pages or in Server header

	include       mime.types;
	default_type  application/octet-stream;

	sendfile        on;
	tcp_nopush      on;
	keepalive_timeout  65;

	# Custom error page for 4xx/5xx to avoid default pages that reveal nginx version
	error_page 403 404 500 502 503 504 /custom_error.html;

	server {
		listen 80;
		server_name _;

		root /var/www/lavacro;
		index index.html;

		location / {
			try_files $uri $uri/ =404;
		}

		location /~david/ {
			alias /home/david/public_html/;
			autoindex off;
		}

		location /camera/ {
			alias /mnt/camera/;
			autoindex off;
		}

		access_log /dev/stdout;
		error_log  /dev/stderr warn;

		add_header X-Content-Type-Options nosniff always;
		add_header X-Frame-Options SAMEORIGIN always;

		location = /custom_error.html {
			internal;
			root /etc/nginx/errors;  # results in /etc/nginx/errors/custom_error.html
		}
	}
}
